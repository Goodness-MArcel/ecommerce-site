<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= product.name %></title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/cb704069bc.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

</head>
<style>
    footer {
    padding-block: 4rem;
    font-size: 14px;
    margin-top: 40px;
    color: #b0aaa9;
}
body{
    background-color: #f1f1f1;
}
ul{
    list-style: none;
    margin: 0;
    padding: 0;
}
a,p,span,small{
    color: #b0aaa9 !important;
    text-decoration: none !important;
    text-transform: capitalize;
    
}
a{
    text-align: start !important;
}
h3,.supermarket,h1{
    font-family: 'Montserrat', sans-serif;
    font-weight: 500;
    text-transform: capitalize;
}
li a{
    margin: 0;
}
.product-detail-container {
    box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
    padding-block: 1.6rem;
    background-color: rgb(255, 255, 255);
    /* border: 2px solid red; */
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    
}
 .main-container{
   
    display: flex;
    justify-content: center;
    gap: 30px;
    width: 80%;
    margin: auto;

   
} 
.main-container>*{
    width: 100%;
 }
.product-detail-image{
    display: flex;
    height: 400px;
    width: 400px;
    justify-content: center;
    border: none;
    overflow: hidden;
    border-radius: 5px;
    img{
        display: block;
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }
}
.product-detail-info{
    box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
    padding-block: 1.1rem;
    padding-inline: 1.3rem;
    border-radius: 5px;
    position: relative;
   
}
.product-detail-info h1{
    font-size: 20px;
    font-weight: 400;
    text-transform: capitalize;
    text-align: center;
    
}

 @media screen and (max-width: 1024px)  {
    .main-container{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 10px;
        padding-block: 2rem;
    }
    .main-container>*{
        width: 100%;
    }
    .main-container{
        width: 100%;
    }
    hr {
        display: none;
    }
    .product-detail-image{
        display: flex;
        height: 400px;
        justify-content: center;
        box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
        border: none;
        overflow: hidden;
        border-radius: 5px;
        img{
            display: block;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;

        }
    }
    .product-detail-info{
        height: auto;
        padding-block: 2rem;
    }

} 
form button{
    width: 100% !important;
    position: absolute;
    text-transform: capitalize;
    bottom: 10px;
    color: white !important;
    left: 0;
    margin-top: 10px;
    ion-icon{
        position: absolute;
        left: 10px;
        bottom: 0;
        color: black;
        font-size: 1.6rem;
        font-weight: 500;
    }

}


</style>
<body>
   

    
        <div class="product-detail-container container">
           <div class="row" style="gap: 20px;">
                <div class="col-lg-12 col-sm-12  main-container">
                    <% if (product) {%>
                        <% console.log(product); %>
                        <% } %>
                    <div class="product-detail-image">
                        <img src="/<%= product.image_url %>" alt="<%= product.name %>">
                    </div>
                    <div class="product-detail-info">
                        <h1><%= product.name %></h1>
                        <hr>
                        <% const discountedPrice = product.price - (product.price * (product.discount / 100)); %>
                        <p class="discounted-price">
                           <strong style="font-size: 24px ;color: black;"> ₦<%= Number(discountedPrice).toFixed(2) %></strong> 
                           <del style="font-size: 16px; font-weight: 400;">₦<%= product.price %></del>
                            <small style="background-color:#faf3ea;padding: 5px; color:rgb(248, 140, 32) !important;">-<%= product.discount %>%</small>
                        </p>          
                        <p><%= product.description %></p>
            
                        <form id="my_form" class="mt-3">
                            <!--  -->

                            <button class="btn btn-warning"
                                onclick="addToCart({
                                product_id: '<%= product.product_id %>',
                                price: '<%= product.price %>',
                                name: '<%= product.name %>',
                                quantity: 1, 
                                image: '<%= product.image_url %>',
                            })"><ion-icon name="cart-outline"></ion-icon>Add to Cart</button>
                        </form>
                    </div>
                </div>
           </div>
        </div>
        
    <footer class="container-fluid  text-light" style="background-color: #353535;">
        <div class="container text-light">
              <div class="row text-start">
                  <div class="col-md-3 col-sm-6">
                      <h3 class="text-light">about us</h3>
                      <p>
                          soronara Supermarket is a modern grocery store focused on providing high-quality, healthy food options to conscious consumers
                      </p>
                  </div>
                  <div class="col-md-3 col-sm-6">
                      <h3 class="text-light">menu</h3>
                      <ul class="">
                          <li><a href="/">home</a></li>
                          <li><a href="">kitchen</a></li>
                          <li><a href="">personal care</a></li>
                          <li><a href="">house hold</a></li>
                          <li><a href="">short code</a></li>
                          <li><a href="">contact</a></li>
                      </ul>
                  </div>
                  <div class="col-md-3 col-sm-6">
                      <h3 class="text-light">customer service</h3>
                      <ul>
                          <li><a href="">shipping</a></li>
                          <li><a href="">terms & conditon</a></li>
                          <li><a href="">faq</a></li>
                          <li><a href="">contact</a></li>
                          <li><a href="">online shoping</a></li>
                      </ul>
                  </div>
                  <div class="col-md-3 col-sm-6">
                      <h3 class="text-light">my account</h3>
                      <ul>
                          <li><a href="">login</a></li>
                          <li><a href="">register</a></li>
                          <li><a href="">wishlist</a></li>
                      </ul>
                  </div>
              </div>
        </div>
        <div class="container  mt-5">
           <div class="row text-center">
              <div class="col-md-12">
                  <h1>soronara</h1>
                  <h3 style="font-size: 14px; text-transform: uppercase;" class="supermarket">the best supermarket</h3>
                  <p>
                      soronara Supermarket is a modern grocery store focused on providing high-quality, healthy food options to conscious consumers. The store offers a wide selection of organic produce, sustainably sourced meats and seafood, and natural pantry staples.
                  </p>
              </div>
           </div>
        </div>
      
        <div class="social-icon d-flex justify-content-center gap-2 mt-5">
          <span 
          class="d-flex justify-content-center align-items-center" style="background-color: #3b5998; width: 40px; height: 40px; border-radius: 50%;"><a href="#"><i class="fab fa-facebook-f" style="color: white;"></i></a></span>
          <span   
          class="d-flex justify-content-center align-items-center" style="background-color: #1da1f2; width: 40px; height: 40px; border-radius: 50%;">
          <a href="#"><i class="fab fa-twitter" style="color: white;"></i></a></span>
          <span 
          class="d-flex justify-content-center align-items-center" style="background-color: #bd081c; width: 40px; height: 40px; border-radius: 50%;"><a href="#"><i class="fab fa-pinterest-p" style="color: white;"></i></a></span>
          <span  
          class="d-flex justify-content-center align-items-center" style="background-color: #c32aa3; width: 40px; height: 40px; border-radius: 50%;"><a href="#"><i class="fab fa-instagram" style="color: white;"></i></a></span>
      </div>
      
      <div class="container mt-5">
        <div class="row">
              <div class="col-md-4">
                  <div class="d-flex align-items-center">
                      <i class="fa-solid fa-location-dot me-2" style="color: orange;"></i>
                      <p class="mb-0">123 Healthy Lane, Organic City, GR 12345</p>
                  </div>
              </div>
              <div class="col-md-4">
                  <div class="d-flex align-items-center">
                      <i class="fa-solid fa-phone me-2" style="color: orange;"></i>
                      <span>+1 (555) 123-4567 , +1 (555) 123-4567  </span>
                  </div>
              </div>
              <div class="col-md-4">
                  <div class="d-flex align-items-center">
                      <i class="fa-solid fa-envelope me-2" style="color: orange;"></i>
                      <p class="mb-0">info@soronara.com</p>
                  </div>
              </div>
          </div>
          <div class="container mt-5">
              <div class="row text-center">
                  <small>© 2024 soronara. All Rights Reserved</small>
              </div>
          </div>
      </div>
      
      </footer>
      
      <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
      <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
      <!-- <script src="/main.js"></script> -->

      <script>
        // If using AJAX approach
        async function addToCart(productData) {
            try {
                console.log('Sending data:', productData); // Debug log
                document.getElementById('my_form').addEventListener('submit', function (e){
                    e.preventDefault();
                })
                
                const response = await fetch('/cart/add', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(productData)
                });
        
                const result = await response.json();
                console.log('Server response:', result);
        
                if (result.success) {
                    alert(result.message);
                } else {
                    alert('Error adding to cart: ' + result.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error adding to cart');
            }
        }
        </script>
</body>
</html>
